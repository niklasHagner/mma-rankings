{% import "fighter.njk" as fighterView %}

<!doctype html>
<html>
<head>
  <title>UFC rankings and events</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    {{ "public/base.css" | inlineFileContent | safe }}
    {{ "public/ui.css" | inlineFileContent | safe }}
    {{ "public/fight.css" | inlineFileContent | safe }}
    {{ "public/loader.css" | inlineFileContent | safe }}
  </style>
</head>

<body class="dark">
  <div id="wrapper">
    <div id="container">
        <header class="site-header">
            <h1>MMA STATS</h1>
            {# <nav class="top-menu">
                <div class="button-group">
                    <a href="#historical-rankings">Historical rankings</a>
                    <a href="#latest-rankings">Latest rankings</a>
                </div> #}
                <!-- <form id="search-form">
                    <input type="search" id="search-input" />
                    <button type="submit">Search</button>
                </form> -->
            {# </nav> #}
        </header>
        
        <div class="triple-loader hidden"><div></div><div></div><div></div></div>

        <div id="main-container" class="container single-post-container">
            <section id="fighter-search-profile">
              <!-- We'll inject templates here with clientside JS -->
            </section>

            <section id="events">
              {% for event in events %}
                <div class="event">
                  {% if event.isBigEvent %}
                    <p class"next-big-event-text">Next big event:</p>
                  {% endif %}
                  <time>{{ event.date }}</time>
                  <h1 class="{{ "post-title event-title big-event" if event.isBigEvent else "post-title event-title" }}">{{ event.eventName }}</h1>
                  <section class="fighters-on-card">
                    {% for match in event.mainMatches %}
                      <div class="fight-on-card">
                        {% for fighter in match.fighters %}
                          {{ fighterView.render(fighter) }}
                        {% endfor %}
                      </div>
                    {% endfor %}

                    <div class="other-fighters-on-card">
                      <h2>Other fighters on card</h2>
                      <ul>
                      {% for match in event.moreMatches %}
                        <li>
                          {% for otherFighter in match.fighters %}
                            <span class="other-fighter-name">{{ otherFighter.name }}</span>
                            {% if loop.index0 == 0 %}
                              <span> VS </span>
                            {% endif %}
                          {% endfor %}
                        </li>
                      {% endfor %}
                      </ul>
                    </div>
                    
                  </section>
                </div>
              {% endfor %}
            </section>
            <section id="rankings">
              <h2 id="latest-rankings">Latest rankings {{ rankings.latestRankings.date }}</h2>
              <section class="snapshot">
                <div class="snapshot-divisions">
                  {% for division in rankings.latestRankings.divisions %}
                    <article class="division">
                      <h3 class="division-name">{{division.name}}</h3>
                      {% for fighter in division.fighters %}
                        <div class="division-fighters">
                          <div>
                            <span class="rank">{{fighter.rank}}</span> <span class="name">{{fighter.name}}</span>
                          </div>
                        </div>
                      {% endfor %}
                    </article>
                  {% endfor %}
                </div>
              </section>
              
              <h2>Historical rankings</h2>
              {{ rankings.allRankings.htmlString | safe }}

              <h2>latestRankings dump</h2>
              {{ rankings.latestRankings | dump | safe }}

            </section>
        </div>
    </div>
  </div>

  <script src="./main.js"></script>
</body>
</html>
